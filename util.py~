import os
import numpy as np
import subprocess



#########################################
# OS
#########################################
def ensure_dir_exists(directory):
  # Guarantees that input dir exists
  if not os.path.exists(directory):
    try:
      os.makedirs(directory)
    except OSError:
      if not os.path.isdir(directory):
        raise
  return

def exists_empty_fn(fn):
  ensure_dir_exists(os.path.dirname(fn))
  f = open(fn, 'w')
  f.close()
  return


def get_fn(string):
  # In: Filename (possibly with directories)
  # Out: Filename without extensions or directories
  return string.split('/')[-1].split('.')[0]

def line_count(fn):
  try:
    ans = subprocess.check_output(['wc', '-l', fn.strip()])
    ans = int(ans.split()[0])
  except OSError as err:
    print('OS ERROR:', err)
  return ans
